{"pageProps":{"postData":{"id":["2014","03","31","artigo-novidades-do-firebird-25"],"contentHtml":"<p>Na parte de expressões SQL, o Firebird 2.5 acrescenta melhorias e novidades. A função agregada LIST (presente desde a versão 2.1) agora aceita qualquer expressão em seu segundo parâmetro, onde o desenvolvedor pode especificar a string de separação dos elementos retornados. Até a versão 2.1.3 era possível apenas o uso de strings constantes nesse parâmetro. Nota: a versão 2.1.4 também deve ser liberada com esta novidade. A <b>listagem 10</b> mostra a utilidade deste parâmetro, principalmente no desenvolvimento de relatórios, agrupando várias mensagens referentes a um documento em um mesmo registro e mostrando cada mensagem em uma linha.<br /><br /><b>Listagem 10</b>. Usando a função LIST com expressões no segundo parâmetro.<br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">SELECT LIST(MENSAGEM, ASCII_CHAR(13) || ASCII_CHAR(10))</span></div><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">  FROM MENSAGENS_DOCUMENTO WHERE DOCUMENTO = 10;</span></div><b style=\"font-weight: normal;\"><br /><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></b>Referente a parâmetros de comandos SQL, o Firebird suporta apenas o uso de parâmetros anônimos com o símbolo “?” (ponto de interrogação). Algumas bibliotecas (inclusive de Delphi) aceitam o uso de parâmetros nomeados usando “:” (dois pontos). Quando o desenvolvedor tentava escrever queries usando o padrão [WHERE :CODIGO IS NULL OR CODIGO = :CODIGO] para trazer todos os registros quando o parâmetro não fosse informado, o Firebird retornava um erro. Isto porque este comando é traduzido pelas bibliotecas para [WHERE ? IS NULL OR CODIGO = ?] e o Firebird não aceitava o uso de parâmetro com o predicado IS NULL, pois o tipo do parâmetro era considerado como desconhecido. Na versão 2.5 foi adicionado à API o tipo SQL_NULL. As bibliotecas de acesso precisam entender este novo tipo e apenas passar se o valor do parâmetro é ou não NULL, permitindo assim o uso deste padrão de comando.<br /><br />Outra novidade referente a expressões é o novo predicado SIMILAR TO. Esta expressão é usada para fazer comparações usando expressões regulares de acordo com o padrão SQL. A <b>listagem 11</b> mostra uma verificação de números de telefones cadastrados fora do padrão (NN) NNNN-NNNN. O caractere de escape funciona exatamente como no comando LIKE, considerando o próximo caractere como um valor literal, ao invés de usá-lo como um operador.<br /><br /><b>Listagem 11.</b> Verificando números de telefones cadastrados fora do padrão.<br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">SELECT * FROM PESSOAS</span></div><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">  WHERE TELEFONE NOT SIMILAR TO</span></div><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">    '([0-9]{2}) [0-9]{4}-[0-9]{4}' escape ''</span></div><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span class=\"Apple-tab-span\" style=\"white-space: pre;\"> </span></span></div>A <b>tabela 1</b> mostra os operadores permitidos em expressões regulares e a <b>tabela 2</b> mostra as classes de caracteres que podem ser usadas com o operador [[:CLASSE:]].<br /><br /><span style=\"vertical-align: baseline;\"></span><br /><div dir=\"ltr\" style=\"margin-left: 0pt;\"><table style=\"border-collapse: collapse; border: none;\"><colgroup><col width=\"108\"></col><col width=\"516\"></col></colgroup><tbody><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Operador</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Descrição</span><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X{2}</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Duas ocorrências de X.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X{2,}</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Duas ou mais ocorrências de X.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X{4,6}</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">De quatro a seis ocorrências de X.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X?</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Zero ou uma ocorrência de X.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X*</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Zero ou mais ocorrências de X.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X+</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Uma ou mais ocorrências de X.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X|Y</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">X ou Y.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">_</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere - como no LIKE.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">%</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer sequência de caracteres - como no LIKE.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">(X)</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Agrupa X para ser tratado pelo operador subsequente.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">[XYZ]</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere igual a X, Y ou Z.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">[^XYZ]</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere diferente de X, Y ou Z.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">[X-Z]</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere entre X e Z.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">[[:CLASSE:]]</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere de uma certa classe, conforme </span><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">tabela 2</span><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">.</span></div></td></tr></tbody></table></div><div dir=\"ltr\" style=\"margin-left: 0pt;\"><b>Tabela 1.</b> Operadores de expressões regulares.<br /><br /><br /><table style=\"border-collapse: collapse; border: none;\"><colgroup><col width=\"108\"></col><col width=\"516\"></col></colgroup><tbody><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Classe</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Descrição</span><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">ALPHA</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere entre A e Z.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">UPPER</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere maiúsculo.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">LOWER</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Qualquer caractere minúsculo.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">DIGIT</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Dígitos de 0 a 9.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">SPACE</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Espaço: caractere (ASCII_CHAR) 32.</span></div></td></tr><tr style=\"height: 0px;\"><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">WHITESPACE</span></div></td><td style=\"border: 1px solid #000000; padding: 7px 7px 7px 7px; vertical-align: top;\"><div dir=\"ltr\" style=\"line-height: 1; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">Todo tipo de espaço: caracteres 9, 10, 11, 12, 13 e 32.</span></div></td></tr></tbody></table></div><b>Tabela 2.</b> Classes de caracteres para expressões regulares.<b style=\"font-weight: normal;\"><br /><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></b><b style=\"font-weight: normal;\"><br /></b><br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"></div>O Firebird 2.5 também suporta novos formatos de valores literais (constantes) para números e strings. Agora é possível escrever números inteiros no formato hexadecimal, usando o prefixo 0x. Quando o número possuir até 8 dígitos hexadecimais após o 0x, como em 0xFFFFFFFF, o número adquire o tipo INTEGER (32 bits com sinal). Quando possuir mais de 8 dígitos, como em 0x0FFFFFFFF, o tipo adquirido é o BIGINT (64 bits com sinal). Desta forma, estas duas constantes retornam valores diferentes, pois os números negativos são armazenados na notação complemento de dois [1].<br /><br />Além de números, também é possível a criação de strings binárias (character set OCTETS) usando a notação hexadecimal x''. Em ambos os casos a letra X pode ser escrita em maiúscula ou minúscula. A listagem 12 mostra o uso destes novos tipos de valores literais. Note que cada par de caracteres hexadecimais se transforma em um byte na string resultante.<br /><div><br /><b>Listagem 12.</b> Novos formatos de expressões literais.<br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">SELECT 0xDEADBEEF, x'DEADBEEF' FROM RDB$DATABASE;</span></div><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">SELECT OCTET_LENGTH(x'DEADBEEF') FROM RDB$DATABASE;</span></div><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">-- Resultado de OCTET_LENGTH: 4, e não 8</span></div><b style=\"font-weight: normal;\"><br /><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></b>A nova função BIN_NOT se junta ao grupo de funções binárias adicionadas na versão 2.1, BIN_AND e BIN_OR. Junto com as constantes hexadecimais, essa família de funções facilita o uso de máscaras de valores binários gravados em um único campo, técnica comumente utilizada em aplicações e agora facilitada no banco de dados. A <b>listagem 13 </b>mostra o uso da função BIN_NOT, que inverte todos os bits de um valor inteiro.<br /><br /><b>Listagem 13.</b> Exemplo de uso da função BIN_NOT.<br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"><span class=\"Apple-tab-span\" style=\"white-space: pre;\"> </span>SELECT BIN_NOT(0xFFFFFFFF) FROM RDB$DATABASE;  -– Resultado: 0</span><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></div><div dir=\"ltr\" style=\"margin-bottom: 0pt; margin-top: 0pt;\"><span style=\"text-indent: 36pt; vertical-align: baseline;\"><span style=\"font-size: x-small;\"><span style=\"line-height: 1.15; white-space: pre-wrap;\"><br /></span></span></span></div>Na versão 2.1 foi adicionada a função GEN_UUID, que retorna um UUID [2] como um valor do tipo CHAR(16) CHARACTER SET OCTETS. Este tipo de retorno foi escolhido pois é a representação mais compacta para ser usado em índices, porém requer suporte das aplicações que desejam exibir estes UUIDs aos usuários. Na nova versão foram adicionadas funções para conversão entre as representações binária e texto [CHAR(36) CHARACTER SET ASCII] de UUIDs, as funções CHAR_TO_UUID e UUID_TO_CHAR. O formato texto de UUID aceito e retornado por estas funções é 'XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX'. A <b>listagem 14</b> mostra o uso destas funções.<br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt; text-align: justify; text-indent: 36pt;\"><br /></div><b style=\"font-weight: normal;\"><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></b><br /><b>Listagem 14.</b> Exemplo de uso das funções UUID_TO_CHAR e CHAR_TO_UUID.<br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">SELECT UUID_TO_CHAR(UUID), DESCRICAO FROM OBJETOS</span></div><br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-left: 36pt; margin-top: 0pt; text-align: justify;\"><span style=\"background-color: transparent; color: black; font-family: 'Courier New'; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">  WHERE UUID = CHAR_TO_UUID(?);</span><span style=\"background-color: transparent; color: black; font-family: Tahoma; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\"></span></div><div><br /></div><br /><b>Notas</b><br /><br />[1] - Complemento de dois é a notação mais comum usada para representar números inteiros com sinal em sistemas computacionais. Nesta notação o bit mais significativo de um número positivo ou do número zero é representado como 0. Os números negativos são representados com os bits invertidos e somado o valor 1. Desta forma, em um número de 32 bits o 1 é representado com trinta e um bits 0 seguido por um bit 1, enquanto que o número -1 é representado por trinta e dois bits 1.<br /><br />[2] - UUID (Universally Unique Identifier) é uma sequência aleatória de 16 bytes que, independente do local e momento que seja gerada, é única. Uma das utilidades dos UUIDs é criar chaves em sistemas distribuídos, como filiais de uma empresa com bancos de dados separados e que tenham os dados agregados em um banco principal através de replicação.</div></p>\n","layout":"post","title":"Artigo \"Novidades do Firebird 2.5\": Expressões, literais e funções","date":"2014-03-31T21:47:00.000-03:00","author":"Adriano dos Santos Fernandes","tags":["artigo","firebird"],"modified_time":"2014-03-31T22:02:20.141-03:00","blogger_id":"tag:blogger.com,1999:blog-3443854162607009076.post-3424921467315647491","blogger_orig_url":"http://asfernandes.blogspot.com/2014/03/artigo-novidades-do-firebird-25.html"}},"__N_SSG":true}